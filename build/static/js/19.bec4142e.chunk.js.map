{"version":3,"sources":["containers/categories/ChildCategory.js"],"names":["RightCCategory","state","order","onOrderChange","Fragment","className","category","name","toUpperCase","style","flexGrow","fontSize","defaultValue","value","onChange","disabled","isLoadingProduct","listProduct","length","map","item","index","key","data","ChildCategory","tag","useParams","useState","isLoading","id","path","parent_category","setState","is_new","is_hot","price_from","price_to","item_per_page","page","filter","setFilter","useEffect","getItems","then","res","list","sub_category","catch","error","console","log","title","routeTemplate","leftComponent","onFilterChange","e","focusTag","type","rightComponent","target"],"mappings":"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","file":"static/js/19.bec4142e.chunk.js","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {useParams} from \"react-router-dom\"\r\nimport {getItems} from \"../../api/api\";\r\nimport './ChildCategory.css'\r\nimport ProductCard from \"../template/ProductCard\";\r\nimport RouteTemplate from \"../template/RouteTemplate\";\r\nimport FilterComponent from \"./FilterComponent\";\r\nimport Category from \"./Category\";\r\nimport LinkTemplate from \"../template/LinkTemplate\";\r\nimport NoProduct from \"./NoProduct\";\r\nimport LoadingCircle from \"../template/LoadingCircle\";\r\nimport BodyTemplate from \"../template/BodyTemplate\";\r\nimport CategorySkeleton from \"../skeleton/CategorySkeleton\";\r\nimport MetaTag from \"../template/MetaTag/MetaTag\";\r\n\r\nconst RightCCategory = ({state, order, onOrderChange}) => {\r\n    return (\r\n        <React.Fragment>\r\n            {\r\n                <div className='child-category-right'>\r\n                    <div className='child-category-title-container'>\r\n                        <div className='child-category-title'>\r\n                            {state.category.name.toUpperCase()}\r\n                        </div>\r\n                        <div style={{flexGrow: 1}}></div>\r\n                        <div className='child-category-select-container'>\r\n                            <span style={{fontSize: '0.9em'}}>Sắp xếp : </span>\r\n                            <select defaultValue='' className='child-category-select' value={order}\r\n                                    onChange={onOrderChange}\r\n                                    name='order'>\r\n                                <option disabled value={''} className='child-category-option'>Thứ tự</option>\r\n                                <option value='name,asc'>Tên A -> Z</option>\r\n                                <option value='price,desc'>Tên Z -> A</option>\r\n                                <option value='sale_price,asc'>Giá tăng dần</option>\r\n                                <option value='sale_price,desc'>Giá giảm dần</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    {\r\n                        state.isLoadingProduct ? <div className='child-category-loading-container'>\r\n                                <div className='child-category-loading-wrapper'>\r\n                                    <LoadingCircle/>\r\n                                </div>\r\n                            </div> :\r\n                            state.listProduct.length === 0 ? <NoProduct/> :\r\n                                <div className='child-category-element-container'>\r\n                                    {\r\n                                        state.listProduct.map((item, index) => {\r\n                                            return (\r\n                                                <div className='child-category-element' key={index}>\r\n                                                    <ProductCard data={item}/>\r\n                                                </div>\r\n                                            )\r\n                                        })\r\n                                    }\r\n                                </div>\r\n                    }\r\n                </div>\r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\nexport default function ChildCategory() {\r\n    const {tag} = useParams()\r\n    const [state, setState] = useState({\r\n        isLoading: true,\r\n        isLoadingProduct: true,\r\n        category: {\r\n            id: 0,\r\n            name: '',\r\n            path: '',\r\n            parent_category: {\r\n                id: 0,\r\n                name: '',\r\n                path: ''\r\n            }\r\n        },\r\n        listProduct: []\r\n\r\n    })\r\n    const [filter, setFilter] = useState({\r\n        order: 'name,asc',\r\n        is_new: 0,\r\n        is_hot: 0,\r\n        price_from: 0,\r\n        price_to: 999999999,\r\n        item_per_page: 30,\r\n        page: 1,\r\n\r\n    })\r\n    useEffect(() => {\r\n        setState({...state, isLoadingProduct: true})\r\n        getItems(`/product_sub?sub_category_tag=${tag}&item_per_page=${filter.item_per_page}&page=${filter.page}&order=${filter.order}&is_new=${filter.is_new}&is_hot=${filter.is_hot}&price_from=${filter.price_from}&price_to=${filter.price_to}`, {})\r\n            .then(res => {\r\n                setState({\r\n                    ...state,\r\n                    listProduct: res.data.list,\r\n                    isLoading: false,\r\n                    isLoadingProduct: false,\r\n                    category: {\r\n                        id: res.data.sub_category.id,\r\n                        name: res.data.sub_category.name,\r\n                        path: res.data.sub_category.path,\r\n                        parent_category: {\r\n                            id: res.data.sub_category.parent_category.id,\r\n                            name: res.data.sub_category.parent_category.name,\r\n                            path: res.data.sub_category.parent_category.path,\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => console.log(error))\r\n    }, [filter, tag])\r\n    const filterChange = (e) => {\r\n        setFilter({\r\n            ...filter,\r\n            is_new: e.is_new,\r\n            is_hot: e.is_hot,\r\n            price_from: e.price_from,\r\n            price_to: e.price_to\r\n        })\r\n    }\r\n    const orderChange = (e) => {\r\n        setFilter({\r\n            ...filter,\r\n            order: e.target.value\r\n        })\r\n    }\r\n    return (\r\n        <BodyTemplate>\r\n            <React.Fragment>\r\n                {\r\n                    state.isLoading ? <CategorySkeleton/> :\r\n                        <React.Fragment>\r\n                            <MetaTag title={state.category.name}/>\r\n                            <Category\r\n                                routeTemplate={<RouteTemplate data={[\r\n                                    {\r\n                                        name: 'Trang chủ',\r\n                                        path: '/'\r\n                                    },\r\n                                    {\r\n                                        name: state.category.parent_category.name,\r\n                                        path: `/p/${state.category.parent_category.path}`,\r\n                                    },\r\n                                    {\r\n                                        name: state.category.name\r\n                                    }\r\n                                ]}/>}\r\n                                leftComponent={<FilterComponent filter={filter} onFilterChange={filterChange}\r\n                                                                focusTag={tag}\r\n                                                                type={1}/>}\r\n                                rightComponent={<RightCCategory state={state} order={filter.order}\r\n                                                                onOrderChange={orderChange}/>}\r\n                            />\r\n                        </React.Fragment>\r\n                }\r\n            </React.Fragment>\r\n        </BodyTemplate>\r\n    );\r\n}\r\n"],"sourceRoot":""}